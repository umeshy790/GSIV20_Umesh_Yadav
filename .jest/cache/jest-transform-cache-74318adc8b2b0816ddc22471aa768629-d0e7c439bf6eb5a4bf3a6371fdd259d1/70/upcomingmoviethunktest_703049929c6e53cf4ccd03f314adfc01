7054e2de69cb00ca53174e52765b83b9
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));

var _reduxThunk = _interopRequireDefault(require("redux-thunk"));

var _fetchMock = _interopRequireDefault(require("fetch-mock"));

var _types = require("../src/types/types");

var _action = require("../src/action");

var middlewares = [_reduxThunk.default];
var mockStore = (0, _reduxMockStore.default)(middlewares);
describe('async actions', function () {
  describe('async actions', function () {
    afterEach(function () {
      _fetchMock.default.restore();
    });
    it('requesting movies', function () {
      _fetchMock.default.getOnce('/movies', {
        body: {
          results: []
        },
        headers: {
          'content-type': 'application/json'
        }
      });

      var expectedActions = [{
        type: _types.REQUEST_UPCOMING_MOVIES_ACTION
      }, {
        type: _types.REQUEST_UPCOMING_MOVIES_SUCCESS_ACTION,
        data: []
      }];
      var store = mockStore({
        movies: []
      });
      return store.dispatch((0, _action.fetchUpcomingMovies)()).then(function () {
        return expect(store.getActions()).toEqual(expectedActions);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVwY29taW5nLW1vdmllLXRodW5rLXRlc3QudHMiXSwibmFtZXMiOlsibWlkZGxld2FyZXMiLCJ0aHVuayIsIm1vY2tTdG9yZSIsImRlc2NyaWJlIiwiYWZ0ZXJFYWNoIiwiZmV0Y2hNb2NrIiwicmVzdG9yZSIsIml0IiwiZ2V0T25jZSIsImJvZHkiLCJyZXN1bHRzIiwiaGVhZGVycyIsImV4cGVjdGVkQWN0aW9ucyIsInR5cGUiLCJSRVFVRVNUX1VQQ09NSU5HX01PVklFU19BQ1RJT04iLCJSRVFVRVNUX1VQQ09NSU5HX01PVklFU19TVUNDRVNTX0FDVElPTiIsImRhdGEiLCJzdG9yZSIsIm1vdmllcyIsImRpc3BhdGNoIiwidGhlbiIsImV4cGVjdCIsImdldEFjdGlvbnMiLCJ0b0VxdWFsIl0sIm1hcHBpbmdzIjoiOztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUlBOztBQUVBLElBQU1BLFdBQVcsR0FBRyxDQUFDQyxtQkFBRCxDQUFwQjtBQUNBLElBQU1DLFNBQVMsR0FBRyw2QkFBbUJGLFdBQW5CLENBQWxCO0FBRUFHLFFBQVEsQ0FBQyxlQUFELEVBQWtCLFlBQU07QUFDOUJBLEVBQUFBLFFBQVEsQ0FBQyxlQUFELEVBQWtCLFlBQU07QUFDOUJDLElBQUFBLFNBQVMsQ0FBQyxZQUFNO0FBQ2RDLHlCQUFVQyxPQUFWO0FBQ0QsS0FGUSxDQUFUO0FBSUFDLElBQUFBLEVBQUUsQ0FBQyxtQkFBRCxFQUFzQixZQUFNO0FBQzVCRix5QkFBVUcsT0FBVixDQUFrQixTQUFsQixFQUE2QjtBQUMzQkMsUUFBQUEsSUFBSSxFQUFFO0FBQUNDLFVBQUFBLE9BQU8sRUFBRTtBQUFWLFNBRHFCO0FBRTNCQyxRQUFBQSxPQUFPLEVBQUU7QUFBQywwQkFBZ0I7QUFBakI7QUFGa0IsT0FBN0I7O0FBS0EsVUFBTUMsZUFBZSxHQUFHLENBQ3RCO0FBQUNDLFFBQUFBLElBQUksRUFBRUM7QUFBUCxPQURzQixFQUV0QjtBQUFDRCxRQUFBQSxJQUFJLEVBQUVFLDZDQUFQO0FBQStDQyxRQUFBQSxJQUFJLEVBQUU7QUFBckQsT0FGc0IsQ0FBeEI7QUFLQSxVQUFNQyxLQUFLLEdBQUdmLFNBQVMsQ0FBQztBQUFDZ0IsUUFBQUEsTUFBTSxFQUFFO0FBQVQsT0FBRCxDQUF2QjtBQUVBLGFBQU9ELEtBQUssQ0FDVEUsUUFESSxDQUNLLGtDQURMLEVBRUpDLElBRkksQ0FFQztBQUFBLGVBQU1DLE1BQU0sQ0FBQ0osS0FBSyxDQUFDSyxVQUFOLEVBQUQsQ0FBTixDQUEyQkMsT0FBM0IsQ0FBbUNYLGVBQW5DLENBQU47QUFBQSxPQUZELENBQVA7QUFHRCxLQWhCQyxDQUFGO0FBaUJELEdBdEJPLENBQVI7QUF1QkQsQ0F4Qk8sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBjb25maWd1cmVNb2NrU3RvcmUgZnJvbSAncmVkdXgtbW9jay1zdG9yZSc7XG5pbXBvcnQgdGh1bmsgZnJvbSAncmVkdXgtdGh1bmsnO1xuaW1wb3J0IGZldGNoTW9jayBmcm9tICdmZXRjaC1tb2NrJztcbmltcG9ydCB7XG4gIFJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX0FDVElPTixcbiAgUkVRVUVTVF9VUENPTUlOR19NT1ZJRVNfU1VDQ0VTU19BQ1RJT04sXG59IGZyb20gJy4uL3NyYy90eXBlcy90eXBlcyc7XG5pbXBvcnQge2ZldGNoVXBjb21pbmdNb3ZpZXN9IGZyb20gJy4uL3NyYy9hY3Rpb24nO1xuXG5jb25zdCBtaWRkbGV3YXJlcyA9IFt0aHVua107XG5jb25zdCBtb2NrU3RvcmUgPSBjb25maWd1cmVNb2NrU3RvcmUobWlkZGxld2FyZXMpO1xuXG5kZXNjcmliZSgnYXN5bmMgYWN0aW9ucycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ2FzeW5jIGFjdGlvbnMnLCAoKSA9PiB7XG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgIGZldGNoTW9jay5yZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVxdWVzdGluZyBtb3ZpZXMnLCAoKSA9PiB7XG4gICAgICBmZXRjaE1vY2suZ2V0T25jZSgnL21vdmllcycsIHtcbiAgICAgICAgYm9keToge3Jlc3VsdHM6IFtdfSxcbiAgICAgICAgaGVhZGVyczogeydjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbid9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGV4cGVjdGVkQWN0aW9ucyA9IFtcbiAgICAgICAge3R5cGU6IFJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX0FDVElPTn0sXG4gICAgICAgIHt0eXBlOiBSRVFVRVNUX1VQQ09NSU5HX01PVklFU19TVUNDRVNTX0FDVElPTiwgZGF0YTogW119LFxuICAgICAgXTtcblxuICAgICAgY29uc3Qgc3RvcmUgPSBtb2NrU3RvcmUoe21vdmllczogW119KTtcblxuICAgICAgcmV0dXJuIHN0b3JlXG4gICAgICAgIC5kaXNwYXRjaChmZXRjaFVwY29taW5nTW92aWVzKCkpXG4gICAgICAgIC50aGVuKCgpID0+IGV4cGVjdChzdG9yZS5nZXRBY3Rpb25zKCkpLnRvRXF1YWwoZXhwZWN0ZWRBY3Rpb25zKSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=