{"version":3,"sources":["async-actions-test.ts"],"names":["middlewares","thunk","mockStore","describe","afterEach","fetchMock","restore","it","getOnce","body","results","expectedActions","type","REQUEST_UPCOMING_MOVIES_ACTION","page","REQUEST_UPCOMING_MOVIES_SUCCESS_ACTION","payload","data","isFetchedMore","store","dispatch","then","expect","getActions","toEqual","id","REQUEST_MOVIE_DETAILS_ACTION","REQUEST_MOVIE_DETAILS_SUCCESS_ACTION"],"mappings":";;AAAA;;AACA;;AACA;;AACA;;AAMA;;AAEA,IAAMA,WAAW,GAAG,CAACC,mBAAD,CAApB;AACA,IAAMC,SAAS,GAAG,6BAAmBF,WAAnB,CAAlB;AAEAG,QAAQ,CAAC,eAAD,EAAkB,YAAM;AAC9BC,EAAAA,SAAS,CAAC,YAAM;AACdC,uBAAUC,OAAV;AACD,GAFQ,CAAT;AAIAH,EAAAA,QAAQ,CAAC,oCAAD,EAAuC,YAAM;AACnDI,IAAAA,EAAE,CAAC,mBAAD,EAAsB,YAAM;AAC5BF,yBAAUG,OAAV,CAAkB,EAAlB,EAAsB;AACpBC,QAAAA,IAAI,EAAE;AAACC,UAAAA,OAAO,EAAE;AAAV;AADc,OAAtB;;AAIA,UAAMC,eAAe,GAAG,CACtB;AAACC,QAAAA,IAAI,EAAEC,qCAAP;AAAuCC,QAAAA,IAAI,EAAE;AAA7C,OADsB,EAEtB;AACEF,QAAAA,IAAI,EAAEG,6CADR;AAEEC,QAAAA,OAAO,EAAE;AAACC,UAAAA,IAAI,EAAE,EAAP;AAAWC,UAAAA,aAAa,EAAE;AAA1B;AAFX,OAFsB,CAAxB;AAQA,UAAMC,KAAK,GAAGjB,SAAS,CAAC,EAAD,CAAvB;AAEA,aAAOiB,KAAK,CACTC,QADI,CACK,iCAAoB,CAApB,EAAuB,EAAvB,CADL,EAEJC,IAFI,CAEC;AAAA,eAAMC,MAAM,CAACH,KAAK,CAACI,UAAN,EAAD,CAAN,CAA2BC,OAA3B,CAAmCb,eAAnC,CAAN;AAAA,OAFD,CAAP;AAGD,KAlBC,CAAF;AAmBD,GApBO,CAAR;AAsBAR,EAAAA,QAAQ,CAAC,oCAAD,EAAuC,YAAM;AACnD,QAAMsB,EAAU,GAAG,KAAnB;AACAlB,IAAAA,EAAE,CAAC,sBAAD,EAAyB,YAAM;AAC/BF,yBAAUG,OAAV,CAAkB,EAAlB,EAAsB;AACpBC,QAAAA,IAAI,EAAE;AADc,OAAtB;;AAIA,UAAME,eAAe,GAAG,CACtB;AAACC,QAAAA,IAAI,EAAEc,mCAAP;AAAqCD,QAAAA,EAAE,EAAEA;AAAzC,OADsB,EAEtB;AAACb,QAAAA,IAAI,EAAEe,2CAAP;AAA6CV,QAAAA,IAAI,EAAE;AAAnD,OAFsB,CAAxB;AAKA,UAAME,KAAK,GAAGjB,SAAS,CAAC,EAAD,CAAvB;AAEA,aAAOiB,KAAK,CACTC,QADI,CACK,+BAAkBK,EAAlB,CADL,EAEJJ,IAFI,CAEC;AAAA,eAAMC,MAAM,CAACH,KAAK,CAACI,UAAN,EAAD,CAAN,CAA2BC,OAA3B,CAAmCb,eAAnC,CAAN;AAAA,OAFD,CAAP;AAGD,KAfC,CAAF;AAgBD,GAlBO,CAAR;AAmBD,CA9CO,CAAR","sourcesContent":["import configureMockStore from 'redux-mock-store';\nimport thunk from 'redux-thunk';\nimport fetchMock from 'fetch-mock';\nimport {\n  REQUEST_UPCOMING_MOVIES_ACTION,\n  REQUEST_UPCOMING_MOVIES_SUCCESS_ACTION,\n  REQUEST_MOVIE_DETAILS_ACTION,\n  REQUEST_MOVIE_DETAILS_SUCCESS_ACTION,\n} from '../src/types/types';\nimport {fetchUpcomingMovies, fetchMovieDetails} from '../src/action';\n\nconst middlewares = [thunk];\nconst mockStore = configureMockStore(middlewares);\n\ndescribe('async actions', () => {\n  afterEach(() => {\n    fetchMock.restore();\n  });\n\n  describe('request upcoming movies thunk test', () => {\n    it('requesting movies', () => {\n      fetchMock.getOnce('', {\n        body: {results: []},\n      });\n\n      const expectedActions = [\n        {type: REQUEST_UPCOMING_MOVIES_ACTION, page: 1},\n        {\n          type: REQUEST_UPCOMING_MOVIES_SUCCESS_ACTION,\n          payload: {data: [], isFetchedMore: false},\n        },\n      ];\n\n      const store = mockStore({});\n\n      return store\n        .dispatch(fetchUpcomingMovies(1, ''))\n        .then(() => expect(store.getActions()).toEqual(expectedActions));\n    });\n  });\n\n  describe('request detail of movie thunk test', () => {\n    const id: number = 12121;\n    it('request movie detail', () => {\n      fetchMock.getOnce('', {\n        body: {},\n      });\n\n      const expectedActions = [\n        {type: REQUEST_MOVIE_DETAILS_ACTION, id: id},\n        {type: REQUEST_MOVIE_DETAILS_SUCCESS_ACTION, data: {}},\n      ];\n\n      const store = mockStore({});\n\n      return store\n        .dispatch(fetchMovieDetails(id))\n        .then(() => expect(store.getActions()).toEqual(expectedActions));\n    });\n  });\n});\n"]}