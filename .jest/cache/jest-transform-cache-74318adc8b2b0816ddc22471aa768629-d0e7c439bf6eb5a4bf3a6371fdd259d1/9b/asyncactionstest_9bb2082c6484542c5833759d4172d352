352f4c5a6ca32acf9d696125223b7877
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var types = _interopRequireWildcard(require("../src/types/types"));

var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));

var _reduxThunk = _interopRequireDefault(require("redux-thunk"));

var _fetchMock = _interopRequireDefault(require("fetch-mock"));

var _expect = _interopRequireDefault(require("expect"));

var _action = require("../src/action");

var middlewares = [_reduxThunk.default];
var mockStore = (0, _reduxMockStore.default)(middlewares);
describe('async actions', function () {
  afterEach(function () {
    _fetchMock.default.restore();
  });
  it('creates actions when fetching has been done', function () {
    _fetchMock.default.getOnce('https://api.themoviedb.org/3/movie/upcoming?api_key=b3a72b722e11795c7179cc928980a9e2', {
      body: [],
      headers: {
        'content-type': 'application/json'
      }
    });

    var expectedActions = [{
      type: types.REQUEST_UPCOMING_MOVIES_ACTION
    }, {
      type: types.REQUEST_UPCOMING_MOVIES_SUCCESS_ACTION,
      data: []
    }];
    var store = mockStore({
      todos: []
    });
    return store.dispatch((0, _action.fetchUpcomingMovies)()).then(function () {
      (0, _expect.default)(store.getActions()).toEqual(expectedActions);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jLWFjdGlvbnMtdGVzdC50cyJdLCJuYW1lcyI6WyJtaWRkbGV3YXJlcyIsInRodW5rIiwibW9ja1N0b3JlIiwiZGVzY3JpYmUiLCJhZnRlckVhY2giLCJmZXRjaE1vY2siLCJyZXN0b3JlIiwiaXQiLCJnZXRPbmNlIiwiYm9keSIsImhlYWRlcnMiLCJleHBlY3RlZEFjdGlvbnMiLCJ0eXBlIiwidHlwZXMiLCJSRVFVRVNUX1VQQ09NSU5HX01PVklFU19BQ1RJT04iLCJSRVFVRVNUX1VQQ09NSU5HX01PVklFU19TVUNDRVNTX0FDVElPTiIsImRhdGEiLCJzdG9yZSIsInRvZG9zIiwiZGlzcGF0Y2giLCJ0aGVuIiwiZ2V0QWN0aW9ucyIsInRvRXF1YWwiXSwibWFwcGluZ3MiOiI7Ozs7QUFBQTs7QUFHQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7QUFFQSxJQUFNQSxXQUFXLEdBQUcsQ0FBQ0MsbUJBQUQsQ0FBcEI7QUFDQSxJQUFNQyxTQUFTLEdBQUcsNkJBQW1CRixXQUFuQixDQUFsQjtBQUVBRyxRQUFRLENBQUMsZUFBRCxFQUFrQixZQUFNO0FBQzlCQyxFQUFBQSxTQUFTLENBQUMsWUFBTTtBQUNkQyx1QkFBVUMsT0FBVjtBQUNELEdBRlEsQ0FBVDtBQUlBQyxFQUFBQSxFQUFFLENBQUMsNkNBQUQsRUFBZ0QsWUFBTTtBQUN0REYsdUJBQVVHLE9BQVYsQ0FDRSxzRkFERixFQUVFO0FBQ0VDLE1BQUFBLElBQUksRUFBRSxFQURSO0FBRUVDLE1BQUFBLE9BQU8sRUFBRTtBQUFDLHdCQUFnQjtBQUFqQjtBQUZYLEtBRkY7O0FBUUEsUUFBTUMsZUFBZSxHQUFHLENBQ3RCO0FBQUNDLE1BQUFBLElBQUksRUFBRUMsS0FBSyxDQUFDQztBQUFiLEtBRHNCLEVBRXRCO0FBQ0VGLE1BQUFBLElBQUksRUFBRUMsS0FBSyxDQUFDRSxzQ0FEZDtBQUVFQyxNQUFBQSxJQUFJLEVBQUU7QUFGUixLQUZzQixDQUF4QjtBQU9BLFFBQU1DLEtBQUssR0FBR2YsU0FBUyxDQUFDO0FBQUNnQixNQUFBQSxLQUFLLEVBQUU7QUFBUixLQUFELENBQXZCO0FBRUEsV0FBT0QsS0FBSyxDQUFDRSxRQUFOLENBQWUsa0NBQWYsRUFBc0NDLElBQXRDLENBQTJDLFlBQU07QUFFdEQsMkJBQU9ILEtBQUssQ0FBQ0ksVUFBTixFQUFQLEVBQTJCQyxPQUEzQixDQUFtQ1gsZUFBbkM7QUFDRCxLQUhNLENBQVA7QUFJRCxHQXRCQyxDQUFGO0FBdUJELENBNUJPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyB0eXBlcyBmcm9tICcuLi9zcmMvdHlwZXMvdHlwZXMnO1xuaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tICcuLi9zcmMvYWN0aW9uL2FjdGlvbnMnO1xuXG5pbXBvcnQgY29uZmlndXJlTW9ja1N0b3JlIGZyb20gJ3JlZHV4LW1vY2stc3RvcmUnO1xuaW1wb3J0IHRodW5rIGZyb20gJ3JlZHV4LXRodW5rJztcblxuaW1wb3J0IGZldGNoTW9jayBmcm9tICdmZXRjaC1tb2NrJztcbmltcG9ydCBleHBlY3QgZnJvbSAnZXhwZWN0JzsgLy8gWW91IGNhbiB1c2UgYW55IHRlc3RpbmcgbGlicmFyeVxuaW1wb3J0IHtmZXRjaFVwY29taW5nTW92aWVzfSBmcm9tICcuLi9zcmMvYWN0aW9uJztcblxuY29uc3QgbWlkZGxld2FyZXMgPSBbdGh1bmtdO1xuY29uc3QgbW9ja1N0b3JlID0gY29uZmlndXJlTW9ja1N0b3JlKG1pZGRsZXdhcmVzKTtcblxuZGVzY3JpYmUoJ2FzeW5jIGFjdGlvbnMnLCAoKSA9PiB7XG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgZmV0Y2hNb2NrLnJlc3RvcmUoKTtcbiAgfSk7XG5cbiAgaXQoJ2NyZWF0ZXMgYWN0aW9ucyB3aGVuIGZldGNoaW5nIGhhcyBiZWVuIGRvbmUnLCAoKSA9PiB7XG4gICAgZmV0Y2hNb2NrLmdldE9uY2UoXG4gICAgICAnaHR0cHM6Ly9hcGkudGhlbW92aWVkYi5vcmcvMy9tb3ZpZS91cGNvbWluZz9hcGlfa2V5PWIzYTcyYjcyMmUxMTc5NWM3MTc5Y2M5Mjg5ODBhOWUyJyxcbiAgICAgIHtcbiAgICAgICAgYm9keTogW10sXG4gICAgICAgIGhlYWRlcnM6IHsnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSxcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIGNvbnN0IGV4cGVjdGVkQWN0aW9ucyA9IFtcbiAgICAgIHt0eXBlOiB0eXBlcy5SRVFVRVNUX1VQQ09NSU5HX01PVklFU19BQ1RJT059LFxuICAgICAge1xuICAgICAgICB0eXBlOiB0eXBlcy5SRVFVRVNUX1VQQ09NSU5HX01PVklFU19TVUNDRVNTX0FDVElPTixcbiAgICAgICAgZGF0YTogW10sXG4gICAgICB9LFxuICAgIF07XG4gICAgY29uc3Qgc3RvcmUgPSBtb2NrU3RvcmUoe3RvZG9zOiBbXX0pO1xuXG4gICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKGZldGNoVXBjb21pbmdNb3ZpZXMoKSkudGhlbigoKSA9PiB7XG4gICAgICAvLyByZXR1cm4gb2YgYXN5bmMgYWN0aW9uc1xuICAgICAgZXhwZWN0KHN0b3JlLmdldEFjdGlvbnMoKSkudG9FcXVhbChleHBlY3RlZEFjdGlvbnMpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19