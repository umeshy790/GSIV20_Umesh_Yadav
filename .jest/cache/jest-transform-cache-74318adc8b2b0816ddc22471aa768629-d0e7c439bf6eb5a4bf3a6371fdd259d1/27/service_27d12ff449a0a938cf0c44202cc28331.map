{"version":3,"sources":["service.ts"],"names":["BASE_URL","key","AbortController","window","controller","isRequestPending","fetchMovies","page","query","upcomingMoviespath","searchMoviePath","encodeURIComponent","abort","fetch","signal","then","res","json","results","catch","err","console","log","getMovieDetails","id"],"mappings":";;;;;AAAA,IAAMA,QAAQ,GAAG,8BAAjB;AACA,IAAMC,GAAG,GAAG,kCAAZ;AAEA,IAAMC,eAAe,GAAGC,MAAM,CAACD,eAA/B;AAEA,IAAIE,UAAU,GAAG,IAAIF,eAAJ,EAAjB;AACA,IAAIG,gBAAyB,GAAG,KAAhC;;AAEO,SAASC,WAAT,CAAqBC,IAArB,EAAmCC,KAAnC,EAAkD;AACvD,MAAMC,kBAAkB,GAAMT,QAAN,gCAAyCC,GAAzC,cAAqDM,IAA7E;AACA,MAAMG,eAAe,GAAMV,QAAN,8BAAuCC,GAAvC,eAAoDU,kBAAkB,CACzFH,KADyF,CAAtE,cAEXD,IAFV;;AAIA,MAAIF,gBAAJ,EAAsB;AACpBD,IAAAA,UAAU,CAACQ,KAAX;AACAR,IAAAA,UAAU,GAAG,IAAIF,eAAJ,EAAb;AACD;;AACDG,EAAAA,gBAAgB,GAAG,IAAnB;AAEA,SAAOQ,KAAK,CAACL,KAAK,GAAGE,eAAH,GAAqBD,kBAA3B,EAA+C;AACzDK,IAAAA,MAAM,EAAEV,UAAU,CAACU;AADsC,GAA/C,CAAL,CAGJC,IAHI,CAGC,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GAHJ,EAIJF,IAJI,CAIC,UAAAE,IAAI,EAAI;AACZZ,IAAAA,gBAAgB,GAAG,KAAnB;AACA,WAAOY,IAAI,CAACC,OAAZ;AACD,GAPI,EAQJC,KARI,CAQE,UAAAC,GAAG,EAAI;AACZf,IAAAA,gBAAgB,GAAG,KAAnB;AACAgB,IAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ;AACD,GAXI,CAAP;AAYD;;AAEM,IAAMG,eAAe,GAAG,SAAlBA,eAAkB,CAACC,EAAD;AAAA,SAC7BX,KAAK,CAAIb,QAAJ,eAAsBwB,EAAtB,iBAAoCvB,GAApC,CAAL,CACGc,IADH,CACQ,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACC,IAAJ,EAAJ;AAAA,GADX,EAEGF,IAFH,CAEQ,UAAAE,IAAI;AAAA,WAAIA,IAAJ;AAAA,GAFZ,CAD6B;AAAA,CAAxB","sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3';\nconst key = 'b3a72b722e11795c7179cc928980a9e2';\n\nconst AbortController = window.AbortController;\n\nlet controller = new AbortController();\nlet isRequestPending: boolean = false;\n\nexport function fetchMovies(page: number, query: string) {\n  const upcomingMoviespath = `${BASE_URL}/movie/upcoming?api_key=${key}&page=${page}`;\n  const searchMoviePath = `${BASE_URL}/search/movie?api_key=${key}&query=${encodeURIComponent(\n    query,\n  )}&page=${page}`;\n\n  if (isRequestPending) {\n    controller.abort();\n    controller = new AbortController();\n  }\n  isRequestPending = true;\n\n  return fetch(query ? searchMoviePath : upcomingMoviespath, {\n    signal: controller.signal,\n  })\n    .then(res => res.json())\n    .then(json => {\n      isRequestPending = false;\n      return json.results;\n    })\n    .catch(err => {\n      isRequestPending = false;\n      console.log(err);\n    });\n}\n\nexport const getMovieDetails = (id: number) =>\n  fetch(`${BASE_URL}/movie/${id}?api_key=${key}`)\n    .then(res => res.json())\n    .then(json => json);\n"]}