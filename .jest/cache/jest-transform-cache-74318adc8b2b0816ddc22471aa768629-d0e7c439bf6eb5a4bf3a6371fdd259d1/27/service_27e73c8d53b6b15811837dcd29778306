bc01361e5d81472ae42f5ffb2edfefab
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fetchMovies = fetchMovies;
exports.getMovieDetails = void 0;
var BASE_URL = 'https://api.themoviedb.org/3';
var key = 'b3a72b722e11795c7179cc928980a9e2';
var controller = new AbortController();
var isRequestPending = false;

function fetchMovies(page, query) {
  var upcomingMoviespath = BASE_URL + "/movie/upcoming?api_key=" + key + "&page=" + page;
  var searchMoviePath = BASE_URL + "/search/movie?api_key=" + key + "&query=" + encodeURIComponent(query) + "&page=" + page;

  if (isRequestPending) {
    controller.abort();
    controller = new AbortController();
  }

  isRequestPending = true;
  return fetch(query ? searchMoviePath : upcomingMoviespath, {
    signal: controller.signal
  }).then(function (res) {
    return res.json();
  }).then(function (json) {
    isRequestPending = false;
    return json.results;
  }).catch(function (err) {
    isRequestPending = false;
    console.log(err);
  });
}

var getMovieDetails = function getMovieDetails(id) {
  return fetch(BASE_URL + "/movie/" + id + "?api_key=" + key).then(function (res) {
    return res.json();
  }).then(function (json) {
    return json;
  });
};

exports.getMovieDetails = getMovieDetails;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2UudHMiXSwibmFtZXMiOlsiQkFTRV9VUkwiLCJrZXkiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwiaXNSZXF1ZXN0UGVuZGluZyIsImZldGNoTW92aWVzIiwicGFnZSIsInF1ZXJ5IiwidXBjb21pbmdNb3ZpZXNwYXRoIiwic2VhcmNoTW92aWVQYXRoIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiYWJvcnQiLCJmZXRjaCIsInNpZ25hbCIsInRoZW4iLCJyZXMiLCJqc29uIiwicmVzdWx0cyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImdldE1vdmllRGV0YWlscyIsImlkIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBLElBQU1BLFFBQVEsR0FBRyw4QkFBakI7QUFDQSxJQUFNQyxHQUFHLEdBQUcsa0NBQVo7QUFJQSxJQUFJQyxVQUFVLEdBQUcsSUFBSUMsZUFBSixFQUFqQjtBQUNBLElBQUlDLGdCQUF5QixHQUFHLEtBQWhDOztBQUVPLFNBQVNDLFdBQVQsQ0FBcUJDLElBQXJCLEVBQW1DQyxLQUFuQyxFQUFrRDtBQUN2RCxNQUFNQyxrQkFBa0IsR0FBTVIsUUFBTixnQ0FBeUNDLEdBQXpDLGNBQXFESyxJQUE3RTtBQUNBLE1BQU1HLGVBQWUsR0FBTVQsUUFBTiw4QkFBdUNDLEdBQXZDLGVBQW9EUyxrQkFBa0IsQ0FDekZILEtBRHlGLENBQXRFLGNBRVhELElBRlY7O0FBSUEsTUFBSUYsZ0JBQUosRUFBc0I7QUFDcEJGLElBQUFBLFVBQVUsQ0FBQ1MsS0FBWDtBQUNBVCxJQUFBQSxVQUFVLEdBQUcsSUFBSUMsZUFBSixFQUFiO0FBQ0Q7O0FBQ0RDLEVBQUFBLGdCQUFnQixHQUFHLElBQW5CO0FBRUEsU0FBT1EsS0FBSyxDQUFDTCxLQUFLLEdBQUdFLGVBQUgsR0FBcUJELGtCQUEzQixFQUErQztBQUN6REssSUFBQUEsTUFBTSxFQUFFWCxVQUFVLENBQUNXO0FBRHNDLEdBQS9DLENBQUwsQ0FHSkMsSUFISSxDQUdDLFVBQUFDLEdBQUc7QUFBQSxXQUFJQSxHQUFHLENBQUNDLElBQUosRUFBSjtBQUFBLEdBSEosRUFJSkYsSUFKSSxDQUlDLFVBQUFFLElBQUksRUFBSTtBQUNaWixJQUFBQSxnQkFBZ0IsR0FBRyxLQUFuQjtBQUNBLFdBQU9ZLElBQUksQ0FBQ0MsT0FBWjtBQUNELEdBUEksRUFRSkMsS0FSSSxDQVFFLFVBQUFDLEdBQUcsRUFBSTtBQUNaZixJQUFBQSxnQkFBZ0IsR0FBRyxLQUFuQjtBQUNBZ0IsSUFBQUEsT0FBTyxDQUFDQyxHQUFSLENBQVlGLEdBQVo7QUFDRCxHQVhJLENBQVA7QUFZRDs7QUFFTSxJQUFNRyxlQUFlLEdBQUcsU0FBbEJBLGVBQWtCLENBQUNDLEVBQUQ7QUFBQSxTQUM3QlgsS0FBSyxDQUFJWixRQUFKLGVBQXNCdUIsRUFBdEIsaUJBQW9DdEIsR0FBcEMsQ0FBTCxDQUNHYSxJQURILENBQ1EsVUFBQUMsR0FBRztBQUFBLFdBQUlBLEdBQUcsQ0FBQ0MsSUFBSixFQUFKO0FBQUEsR0FEWCxFQUVHRixJQUZILENBRVEsVUFBQUUsSUFBSTtBQUFBLFdBQUlBLElBQUo7QUFBQSxHQUZaLENBRDZCO0FBQUEsQ0FBeEIiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBCQVNFX1VSTCA9ICdodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zJztcbmNvbnN0IGtleSA9ICdiM2E3MmI3MjJlMTE3OTVjNzE3OWNjOTI4OTgwYTllMic7XG5cbi8vIGNvbnN0IEFib3J0Q29udHJvbGxlciA9IHdpbmRvdy5BYm9ydENvbnRyb2xsZXI7XG5cbmxldCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xubGV0IGlzUmVxdWVzdFBlbmRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoTW92aWVzKHBhZ2U6IG51bWJlciwgcXVlcnk6IHN0cmluZykge1xuICBjb25zdCB1cGNvbWluZ01vdmllc3BhdGggPSBgJHtCQVNFX1VSTH0vbW92aWUvdXBjb21pbmc/YXBpX2tleT0ke2tleX0mcGFnZT0ke3BhZ2V9YDtcbiAgY29uc3Qgc2VhcmNoTW92aWVQYXRoID0gYCR7QkFTRV9VUkx9L3NlYXJjaC9tb3ZpZT9hcGlfa2V5PSR7a2V5fSZxdWVyeT0ke2VuY29kZVVSSUNvbXBvbmVudChcbiAgICBxdWVyeSxcbiAgKX0mcGFnZT0ke3BhZ2V9YDtcblxuICBpZiAoaXNSZXF1ZXN0UGVuZGluZykge1xuICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICB9XG4gIGlzUmVxdWVzdFBlbmRpbmcgPSB0cnVlO1xuXG4gIHJldHVybiBmZXRjaChxdWVyeSA/IHNlYXJjaE1vdmllUGF0aCA6IHVwY29taW5nTW92aWVzcGF0aCwge1xuICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXG4gIH0pXG4gICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLnRoZW4oanNvbiA9PiB7XG4gICAgICBpc1JlcXVlc3RQZW5kaW5nID0gZmFsc2U7XG4gICAgICByZXR1cm4ganNvbi5yZXN1bHRzO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICBpc1JlcXVlc3RQZW5kaW5nID0gZmFsc2U7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgY29uc3QgZ2V0TW92aWVEZXRhaWxzID0gKGlkOiBudW1iZXIpID0+XG4gIGZldGNoKGAke0JBU0VfVVJMfS9tb3ZpZS8ke2lkfT9hcGlfa2V5PSR7a2V5fWApXG4gICAgLnRoZW4ocmVzID0+IHJlcy5qc29uKCkpXG4gICAgLnRoZW4oanNvbiA9PiBqc29uKTtcbiJdfQ==