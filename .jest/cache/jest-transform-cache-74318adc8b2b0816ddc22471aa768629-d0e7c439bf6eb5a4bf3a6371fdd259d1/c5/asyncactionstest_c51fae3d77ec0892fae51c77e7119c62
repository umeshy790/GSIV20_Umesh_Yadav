09e40329965fc2da52598d98ddfbf960
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));

var _reduxThunk = _interopRequireDefault(require("redux-thunk"));

var _fetchMock = _interopRequireDefault(require("fetch-mock"));

var _types = require("../src/types/types");

var _action = require("../src/action");

var middlewares = [_reduxThunk.default];
var mockStore = (0, _reduxMockStore.default)(middlewares);
describe('async actions', function () {
  describe('request movie action and request success action', function () {
    afterEach(function () {
      _fetchMock.default.restore();
    });
    it('requesting movies', function () {
      _fetchMock.default.getOnce('https://api.themoviedb.org/3/movie/upcoming?api_key=b3a72b722e11795c7179cc928980a9e2', {
        body: {
          results: []
        },
        headers: {
          'content-type': 'application/json'
        }
      });

      var expectedActions = [{
        type: _types.REQUEST_UPCOMING_MOVIES_ACTION
      }, {
        type: _types.REQUEST_UPCOMING_MOVIES_SUCCESS_ACTION,
        data: []
      }];
      var store = mockStore({
        movies: []
      });
      return store.dispatch((0, _action.fetchUpcomingMovies)()).then(function () {
        return expect(store.getActions()).toEqual(expectedActions);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jLWFjdGlvbnMtdGVzdC50cyJdLCJuYW1lcyI6WyJtaWRkbGV3YXJlcyIsInRodW5rIiwibW9ja1N0b3JlIiwiZGVzY3JpYmUiLCJhZnRlckVhY2giLCJmZXRjaE1vY2siLCJyZXN0b3JlIiwiaXQiLCJnZXRPbmNlIiwiYm9keSIsInJlc3VsdHMiLCJoZWFkZXJzIiwiZXhwZWN0ZWRBY3Rpb25zIiwidHlwZSIsIlJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX0FDVElPTiIsIlJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX1NVQ0NFU1NfQUNUSU9OIiwiZGF0YSIsInN0b3JlIiwibW92aWVzIiwiZGlzcGF0Y2giLCJ0aGVuIiwiZXhwZWN0IiwiZ2V0QWN0aW9ucyIsInRvRXF1YWwiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBSUE7O0FBRUEsSUFBTUEsV0FBVyxHQUFHLENBQUNDLG1CQUFELENBQXBCO0FBQ0EsSUFBTUMsU0FBUyxHQUFHLDZCQUFtQkYsV0FBbkIsQ0FBbEI7QUFFQUcsUUFBUSxDQUFDLGVBQUQsRUFBa0IsWUFBTTtBQUM5QkEsRUFBQUEsUUFBUSxDQUFDLGlEQUFELEVBQW9ELFlBQU07QUFDaEVDLElBQUFBLFNBQVMsQ0FBQyxZQUFNO0FBQ2RDLHlCQUFVQyxPQUFWO0FBQ0QsS0FGUSxDQUFUO0FBSUFDLElBQUFBLEVBQUUsQ0FBQyxtQkFBRCxFQUFzQixZQUFNO0FBQzVCRix5QkFBVUcsT0FBVixDQUNFLHNGQURGLEVBRUU7QUFDRUMsUUFBQUEsSUFBSSxFQUFFO0FBQUNDLFVBQUFBLE9BQU8sRUFBRTtBQUFWLFNBRFI7QUFFRUMsUUFBQUEsT0FBTyxFQUFFO0FBQUMsMEJBQWdCO0FBQWpCO0FBRlgsT0FGRjs7QUFRQSxVQUFNQyxlQUFlLEdBQUcsQ0FDdEI7QUFBQ0MsUUFBQUEsSUFBSSxFQUFFQztBQUFQLE9BRHNCLEVBRXRCO0FBQUNELFFBQUFBLElBQUksRUFBRUUsNkNBQVA7QUFBK0NDLFFBQUFBLElBQUksRUFBRTtBQUFyRCxPQUZzQixDQUF4QjtBQUtBLFVBQU1DLEtBQUssR0FBR2YsU0FBUyxDQUFDO0FBQUNnQixRQUFBQSxNQUFNLEVBQUU7QUFBVCxPQUFELENBQXZCO0FBRUEsYUFBT0QsS0FBSyxDQUNURSxRQURJLENBQ0ssa0NBREwsRUFFSkMsSUFGSSxDQUVDO0FBQUEsZUFBTUMsTUFBTSxDQUFDSixLQUFLLENBQUNLLFVBQU4sRUFBRCxDQUFOLENBQTJCQyxPQUEzQixDQUFtQ1gsZUFBbkMsQ0FBTjtBQUFBLE9BRkQsQ0FBUDtBQUdELEtBbkJDLENBQUY7QUFvQkQsR0F6Qk8sQ0FBUjtBQTBCRCxDQTNCTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZ3VyZU1vY2tTdG9yZSBmcm9tICdyZWR1eC1tb2NrLXN0b3JlJztcbmltcG9ydCB0aHVuayBmcm9tICdyZWR1eC10aHVuayc7XG5pbXBvcnQgZmV0Y2hNb2NrIGZyb20gJ2ZldGNoLW1vY2snO1xuaW1wb3J0IHtcbiAgUkVRVUVTVF9VUENPTUlOR19NT1ZJRVNfQUNUSU9OLFxuICBSRVFVRVNUX1VQQ09NSU5HX01PVklFU19TVUNDRVNTX0FDVElPTixcbn0gZnJvbSAnLi4vc3JjL3R5cGVzL3R5cGVzJztcbmltcG9ydCB7ZmV0Y2hVcGNvbWluZ01vdmllc30gZnJvbSAnLi4vc3JjL2FjdGlvbic7XG5cbmNvbnN0IG1pZGRsZXdhcmVzID0gW3RodW5rXTtcbmNvbnN0IG1vY2tTdG9yZSA9IGNvbmZpZ3VyZU1vY2tTdG9yZShtaWRkbGV3YXJlcyk7XG5cbmRlc2NyaWJlKCdhc3luYyBhY3Rpb25zJywgKCkgPT4ge1xuICBkZXNjcmliZSgncmVxdWVzdCBtb3ZpZSBhY3Rpb24gYW5kIHJlcXVlc3Qgc3VjY2VzcyBhY3Rpb24nLCAoKSA9PiB7XG4gICAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAgIGZldGNoTW9jay5yZXN0b3JlKCk7XG4gICAgfSk7XG5cbiAgICBpdCgncmVxdWVzdGluZyBtb3ZpZXMnLCAoKSA9PiB7XG4gICAgICBmZXRjaE1vY2suZ2V0T25jZShcbiAgICAgICAgJ2h0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvbW92aWUvdXBjb21pbmc/YXBpX2tleT1iM2E3MmI3MjJlMTE3OTVjNzE3OWNjOTI4OTgwYTllMicsXG4gICAgICAgIHtcbiAgICAgICAgICBib2R5OiB7cmVzdWx0czogW119LFxuICAgICAgICAgIGhlYWRlcnM6IHsnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSxcbiAgICAgICAgfSxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGV4cGVjdGVkQWN0aW9ucyA9IFtcbiAgICAgICAge3R5cGU6IFJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX0FDVElPTn0sXG4gICAgICAgIHt0eXBlOiBSRVFVRVNUX1VQQ09NSU5HX01PVklFU19TVUNDRVNTX0FDVElPTiwgZGF0YTogW119LFxuICAgICAgXTtcblxuICAgICAgY29uc3Qgc3RvcmUgPSBtb2NrU3RvcmUoe21vdmllczogW119KTtcblxuICAgICAgcmV0dXJuIHN0b3JlXG4gICAgICAgIC5kaXNwYXRjaChmZXRjaFVwY29taW5nTW92aWVzKCkpXG4gICAgICAgIC50aGVuKCgpID0+IGV4cGVjdChzdG9yZS5nZXRBY3Rpb25zKCkpLnRvRXF1YWwoZXhwZWN0ZWRBY3Rpb25zKSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=