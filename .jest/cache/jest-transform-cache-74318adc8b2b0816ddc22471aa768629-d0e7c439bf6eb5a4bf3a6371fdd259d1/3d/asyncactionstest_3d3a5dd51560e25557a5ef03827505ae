58dc0c69cbd42bcda98a9a75ebd65cd3
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var types = _interopRequireWildcard(require("../src/types/types"));

var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));

var _reduxThunk = _interopRequireDefault(require("redux-thunk"));

var _fetchMock = _interopRequireDefault(require("fetch-mock"));

var _expect = _interopRequireDefault(require("expect"));

var _action = require("../src/action");

var middlewares = [_reduxThunk.default];
var mockStore = (0, _reduxMockStore.default)(middlewares);
describe('async actions', function () {
  afterEach(function () {
    _fetchMock.default.restore();
  });
  it('creates actions when fetching has been done', function () {
    _fetchMock.default.getOnce('https://api.themoviedb.org/3/movie/upcoming?api_key=b3a72b722e11795c7179cc928980a9e2', {
      headers: {
        'content-type': 'application/json'
      }
    });

    var expectedActions = [{
      type: types.REQUEST_UPCOMING_MOVIES_ACTION
    }, {
      type: types.REQUEST_UPCOMING_MOVIES_SUCCESS_ACTION,
      data: []
    }];
    var store = mockStore({
      todos: []
    });
    return store.dispatch((0, _action.fetchUpcomingMovies)()).then(function () {
      (0, _expect.default)(store.getActions()).toEqual(expectedActions);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jLWFjdGlvbnMtdGVzdC50cyJdLCJuYW1lcyI6WyJtaWRkbGV3YXJlcyIsInRodW5rIiwibW9ja1N0b3JlIiwiZGVzY3JpYmUiLCJhZnRlckVhY2giLCJmZXRjaE1vY2siLCJyZXN0b3JlIiwiaXQiLCJnZXRPbmNlIiwiaGVhZGVycyIsImV4cGVjdGVkQWN0aW9ucyIsInR5cGUiLCJ0eXBlcyIsIlJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX0FDVElPTiIsIlJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX1NVQ0NFU1NfQUNUSU9OIiwiZGF0YSIsInN0b3JlIiwidG9kb3MiLCJkaXNwYXRjaCIsInRoZW4iLCJnZXRBY3Rpb25zIiwidG9FcXVhbCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUVBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUdBLElBQU1BLFdBQVcsR0FBRyxDQUFDQyxtQkFBRCxDQUFwQjtBQUNBLElBQU1DLFNBQVMsR0FBRyw2QkFBbUJGLFdBQW5CLENBQWxCO0FBRUFHLFFBQVEsQ0FBQyxlQUFELEVBQWtCLFlBQU07QUFDOUJDLEVBQUFBLFNBQVMsQ0FBQyxZQUFNO0FBQ2RDLHVCQUFVQyxPQUFWO0FBQ0QsR0FGUSxDQUFUO0FBSUFDLEVBQUFBLEVBQUUsQ0FBQyw2Q0FBRCxFQUFnRCxZQUFNO0FBQ3RERix1QkFBVUcsT0FBVixDQUNFLHNGQURGLEVBRUU7QUFDRUMsTUFBQUEsT0FBTyxFQUFFO0FBQUMsd0JBQWdCO0FBQWpCO0FBRFgsS0FGRjs7QUFPQSxRQUFNQyxlQUFlLEdBQUcsQ0FDdEI7QUFBQ0MsTUFBQUEsSUFBSSxFQUFFQyxLQUFLLENBQUNDO0FBQWIsS0FEc0IsRUFFdEI7QUFDRUYsTUFBQUEsSUFBSSxFQUFFQyxLQUFLLENBQUNFLHNDQURkO0FBRUVDLE1BQUFBLElBQUksRUFBRTtBQUZSLEtBRnNCLENBQXhCO0FBT0EsUUFBTUMsS0FBSyxHQUFHZCxTQUFTLENBQUM7QUFBQ2UsTUFBQUEsS0FBSyxFQUFFO0FBQVIsS0FBRCxDQUF2QjtBQUVBLFdBQU9ELEtBQUssQ0FBQ0UsUUFBTixDQUFlLGtDQUFmLEVBQXNDQyxJQUF0QyxDQUEyQyxZQUFNO0FBRXRELDJCQUFPSCxLQUFLLENBQUNJLFVBQU4sRUFBUCxFQUEyQkMsT0FBM0IsQ0FBbUNYLGVBQW5DO0FBQ0QsS0FITSxDQUFQO0FBSUQsR0FyQkMsQ0FBRjtBQXNCRCxDQTNCTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi4vc3JjL3R5cGVzL3R5cGVzJztcblxuaW1wb3J0IGNvbmZpZ3VyZU1vY2tTdG9yZSBmcm9tICdyZWR1eC1tb2NrLXN0b3JlJztcbmltcG9ydCB0aHVuaywge1RodW5rTWlkZGxld2FyZX0gZnJvbSAncmVkdXgtdGh1bmsnO1xuXG5pbXBvcnQgZmV0Y2hNb2NrIGZyb20gJ2ZldGNoLW1vY2snO1xuaW1wb3J0IGV4cGVjdCBmcm9tICdleHBlY3QnOyAvLyBZb3UgY2FuIHVzZSBhbnkgdGVzdGluZyBsaWJyYXJ5XG5pbXBvcnQge2ZldGNoVXBjb21pbmdNb3ZpZXN9IGZyb20gJy4uL3NyYy9hY3Rpb24nO1xuaW1wb3J0IHtSb290U3RhdGV9IGZyb20gJy4uL3NyYy9zdG9yZSc7XG5cbmNvbnN0IG1pZGRsZXdhcmVzID0gW3RodW5rIGFzIFRodW5rTWlkZGxld2FyZTxSb290U3RhdGUsIHR5cGVzLkFwcEFjdGlvbnNUeXBlPl07XG5jb25zdCBtb2NrU3RvcmUgPSBjb25maWd1cmVNb2NrU3RvcmUobWlkZGxld2FyZXMpO1xuXG5kZXNjcmliZSgnYXN5bmMgYWN0aW9ucycsICgpID0+IHtcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBmZXRjaE1vY2sucmVzdG9yZSgpO1xuICB9KTtcblxuICBpdCgnY3JlYXRlcyBhY3Rpb25zIHdoZW4gZmV0Y2hpbmcgaGFzIGJlZW4gZG9uZScsICgpID0+IHtcbiAgICBmZXRjaE1vY2suZ2V0T25jZShcbiAgICAgICdodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL21vdmllL3VwY29taW5nP2FwaV9rZXk9YjNhNzJiNzIyZTExNzk1YzcxNzljYzkyODk4MGE5ZTInLFxuICAgICAge1xuICAgICAgICBoZWFkZXJzOiB7J2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30sXG4gICAgICB9LFxuICAgICk7XG5cbiAgICBjb25zdCBleHBlY3RlZEFjdGlvbnMgPSBbXG4gICAgICB7dHlwZTogdHlwZXMuUkVRVUVTVF9VUENPTUlOR19NT1ZJRVNfQUNUSU9OfSxcbiAgICAgIHtcbiAgICAgICAgdHlwZTogdHlwZXMuUkVRVUVTVF9VUENPTUlOR19NT1ZJRVNfU1VDQ0VTU19BQ1RJT04sXG4gICAgICAgIGRhdGE6IFtdLFxuICAgICAgfSxcbiAgICBdO1xuICAgIGNvbnN0IHN0b3JlID0gbW9ja1N0b3JlKHt0b2RvczogW119KTtcblxuICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaChmZXRjaFVwY29taW5nTW92aWVzKCkpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gcmV0dXJuIG9mIGFzeW5jIGFjdGlvbnNcbiAgICAgIGV4cGVjdChzdG9yZS5nZXRBY3Rpb25zKCkpLnRvRXF1YWwoZXhwZWN0ZWRBY3Rpb25zKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==