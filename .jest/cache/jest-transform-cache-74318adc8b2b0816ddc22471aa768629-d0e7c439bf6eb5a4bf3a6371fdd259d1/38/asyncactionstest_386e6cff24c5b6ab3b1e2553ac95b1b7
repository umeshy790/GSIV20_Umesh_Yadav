b794decb58f3aea263dcc1492a4eacf4
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));

var _reduxThunk = _interopRequireDefault(require("redux-thunk"));

var _fetchMock = _interopRequireDefault(require("fetch-mock"));

var _types = require("../src/types/types");

var _action = require("../src/action");

var middlewares = [_reduxThunk.default];
var mockStore = (0, _reduxMockStore.default)(middlewares);
describe('async actions', function () {
  describe('request movie action and request success action', function () {
    afterEach(function () {
      _fetchMock.default.restore();
    });
    it('requesting movies', function () {
      _fetchMock.default.getOnce('https://api.themoviedb.org/3/movie/upcoming', {
        body: {
          results: []
        },
        headers: {
          'content-type': 'application/json'
        }
      });

      var expectedActions = [{
        type: _types.REQUEST_UPCOMING_MOVIES_ACTION
      }, {
        type: _types.REQUEST_UPCOMING_MOVIES_SUCCESS_ACTION,
        data: []
      }];
      var store = mockStore({
        movies: []
      });
      return store.dispatch((0, _action.fetchUpcomingMovies)()).then(function () {
        return expect(store.getActions()).toEqual(expectedActions);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jLWFjdGlvbnMtdGVzdC50cyJdLCJuYW1lcyI6WyJtaWRkbGV3YXJlcyIsInRodW5rIiwibW9ja1N0b3JlIiwiZGVzY3JpYmUiLCJhZnRlckVhY2giLCJmZXRjaE1vY2siLCJyZXN0b3JlIiwiaXQiLCJnZXRPbmNlIiwiYm9keSIsInJlc3VsdHMiLCJoZWFkZXJzIiwiZXhwZWN0ZWRBY3Rpb25zIiwidHlwZSIsIlJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX0FDVElPTiIsIlJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX1NVQ0NFU1NfQUNUSU9OIiwiZGF0YSIsInN0b3JlIiwibW92aWVzIiwiZGlzcGF0Y2giLCJ0aGVuIiwiZXhwZWN0IiwiZ2V0QWN0aW9ucyIsInRvRXF1YWwiXSwibWFwcGluZ3MiOiI7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBSUE7O0FBRUEsSUFBTUEsV0FBVyxHQUFHLENBQUNDLG1CQUFELENBQXBCO0FBQ0EsSUFBTUMsU0FBUyxHQUFHLDZCQUFtQkYsV0FBbkIsQ0FBbEI7QUFFQUcsUUFBUSxDQUFDLGVBQUQsRUFBa0IsWUFBTTtBQUM5QkEsRUFBQUEsUUFBUSxDQUFDLGlEQUFELEVBQW9ELFlBQU07QUFDaEVDLElBQUFBLFNBQVMsQ0FBQyxZQUFNO0FBQ2RDLHlCQUFVQyxPQUFWO0FBQ0QsS0FGUSxDQUFUO0FBSUFDLElBQUFBLEVBQUUsQ0FBQyxtQkFBRCxFQUFzQixZQUFNO0FBQzVCRix5QkFBVUcsT0FBVixDQUFrQiw2Q0FBbEIsRUFBaUU7QUFDL0RDLFFBQUFBLElBQUksRUFBRTtBQUFDQyxVQUFBQSxPQUFPLEVBQUU7QUFBVixTQUR5RDtBQUUvREMsUUFBQUEsT0FBTyxFQUFFO0FBQUMsMEJBQWdCO0FBQWpCO0FBRnNELE9BQWpFOztBQUtBLFVBQU1DLGVBQWUsR0FBRyxDQUN0QjtBQUFDQyxRQUFBQSxJQUFJLEVBQUVDO0FBQVAsT0FEc0IsRUFFdEI7QUFBQ0QsUUFBQUEsSUFBSSxFQUFFRSw2Q0FBUDtBQUErQ0MsUUFBQUEsSUFBSSxFQUFFO0FBQXJELE9BRnNCLENBQXhCO0FBS0EsVUFBTUMsS0FBSyxHQUFHZixTQUFTLENBQUM7QUFBQ2dCLFFBQUFBLE1BQU0sRUFBRTtBQUFULE9BQUQsQ0FBdkI7QUFFQSxhQUFPRCxLQUFLLENBQ1RFLFFBREksQ0FDSyxrQ0FETCxFQUVKQyxJQUZJLENBRUM7QUFBQSxlQUFNQyxNQUFNLENBQUNKLEtBQUssQ0FBQ0ssVUFBTixFQUFELENBQU4sQ0FBMkJDLE9BQTNCLENBQW1DWCxlQUFuQyxDQUFOO0FBQUEsT0FGRCxDQUFQO0FBR0QsS0FoQkMsQ0FBRjtBQWlCRCxHQXRCTyxDQUFSO0FBdUJELENBeEJPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY29uZmlndXJlTW9ja1N0b3JlIGZyb20gJ3JlZHV4LW1vY2stc3RvcmUnO1xuaW1wb3J0IHRodW5rIGZyb20gJ3JlZHV4LXRodW5rJztcbmltcG9ydCBmZXRjaE1vY2sgZnJvbSAnZmV0Y2gtbW9jayc7XG5pbXBvcnQge1xuICBSRVFVRVNUX1VQQ09NSU5HX01PVklFU19BQ1RJT04sXG4gIFJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX1NVQ0NFU1NfQUNUSU9OLFxufSBmcm9tICcuLi9zcmMvdHlwZXMvdHlwZXMnO1xuaW1wb3J0IHtmZXRjaFVwY29taW5nTW92aWVzfSBmcm9tICcuLi9zcmMvYWN0aW9uJztcblxuY29uc3QgbWlkZGxld2FyZXMgPSBbdGh1bmtdO1xuY29uc3QgbW9ja1N0b3JlID0gY29uZmlndXJlTW9ja1N0b3JlKG1pZGRsZXdhcmVzKTtcblxuZGVzY3JpYmUoJ2FzeW5jIGFjdGlvbnMnLCAoKSA9PiB7XG4gIGRlc2NyaWJlKCdyZXF1ZXN0IG1vdmllIGFjdGlvbiBhbmQgcmVxdWVzdCBzdWNjZXNzIGFjdGlvbicsICgpID0+IHtcbiAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgZmV0Y2hNb2NrLnJlc3RvcmUoKTtcbiAgICB9KTtcblxuICAgIGl0KCdyZXF1ZXN0aW5nIG1vdmllcycsICgpID0+IHtcbiAgICAgIGZldGNoTW9jay5nZXRPbmNlKCdodHRwczovL2FwaS50aGVtb3ZpZWRiLm9yZy8zL21vdmllL3VwY29taW5nJywge1xuICAgICAgICBib2R5OiB7cmVzdWx0czogW119LFxuICAgICAgICBoZWFkZXJzOiB7J2NvbnRlbnQtdHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ30sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRBY3Rpb25zID0gW1xuICAgICAgICB7dHlwZTogUkVRVUVTVF9VUENPTUlOR19NT1ZJRVNfQUNUSU9OfSxcbiAgICAgICAge3R5cGU6IFJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX1NVQ0NFU1NfQUNUSU9OLCBkYXRhOiBbXX0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBzdG9yZSA9IG1vY2tTdG9yZSh7bW92aWVzOiBbXX0pO1xuXG4gICAgICByZXR1cm4gc3RvcmVcbiAgICAgICAgLmRpc3BhdGNoKGZldGNoVXBjb21pbmdNb3ZpZXMoKSlcbiAgICAgICAgLnRoZW4oKCkgPT4gZXhwZWN0KHN0b3JlLmdldEFjdGlvbnMoKSkudG9FcXVhbChleHBlY3RlZEFjdGlvbnMpKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==