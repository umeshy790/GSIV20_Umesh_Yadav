3bb4a43987a9486e6ec7f21d934407ad
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fetchMovies = fetchMovies;
exports.getMovieDetails = void 0;
var BASE_URL = 'https://api.themoviedb.org/3';
var key = 'b3a72b722e11795c7179cc928980a9e2';
var AbortController = window.AbortController;
var isRequestPending = false;

function fetchMovies(page, query) {
  var controller = new AbortController();
  var upcomingMoviespath = BASE_URL + "/movie/upcoming?api_key=" + key + "&page=" + page;
  var searchMoviePath = BASE_URL + "/search/movie?api_key=" + key + "&query=" + encodeURIComponent(query) + "&page=" + page;

  if (isRequestPending) {
    controller.abort();
  }

  isRequestPending = true;
  return fetch(query ? searchMoviePath : upcomingMoviespath, {
    signal: controller.signal
  }).then(function (res) {
    return res.json();
  }).then(function (json) {
    isRequestPending = false;
    return json.results;
  }).catch(function (err) {
    isRequestPending = false;
    console.log(err);
  });
}

var getMovieDetails = function getMovieDetails(id) {
  return fetch(BASE_URL + "/movie/" + id + "?api_key=" + key).then(function (res) {
    return res.json();
  }).then(function (json) {
    return json;
  });
};

exports.getMovieDetails = getMovieDetails;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2UudHMiXSwibmFtZXMiOlsiQkFTRV9VUkwiLCJrZXkiLCJBYm9ydENvbnRyb2xsZXIiLCJ3aW5kb3ciLCJpc1JlcXVlc3RQZW5kaW5nIiwiZmV0Y2hNb3ZpZXMiLCJwYWdlIiwicXVlcnkiLCJjb250cm9sbGVyIiwidXBjb21pbmdNb3ZpZXNwYXRoIiwic2VhcmNoTW92aWVQYXRoIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiYWJvcnQiLCJmZXRjaCIsInNpZ25hbCIsInRoZW4iLCJyZXMiLCJqc29uIiwicmVzdWx0cyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImdldE1vdmllRGV0YWlscyIsImlkIl0sIm1hcHBpbmdzIjoiOzs7OztBQUFBLElBQU1BLFFBQVEsR0FBRyw4QkFBakI7QUFDQSxJQUFNQyxHQUFHLEdBQUcsa0NBQVo7QUFFQSxJQUFNQyxlQUFlLEdBQUdDLE1BQU0sQ0FBQ0QsZUFBL0I7QUFFQSxJQUFJRSxnQkFBeUIsR0FBRyxLQUFoQzs7QUFFTyxTQUFTQyxXQUFULENBQXFCQyxJQUFyQixFQUFtQ0MsS0FBbkMsRUFBa0Q7QUFDdkQsTUFBSUMsVUFBVSxHQUFHLElBQUlOLGVBQUosRUFBakI7QUFDQSxNQUFNTyxrQkFBa0IsR0FBTVQsUUFBTixnQ0FBeUNDLEdBQXpDLGNBQXFESyxJQUE3RTtBQUNBLE1BQU1JLGVBQWUsR0FBTVYsUUFBTiw4QkFBdUNDLEdBQXZDLGVBQW9EVSxrQkFBa0IsQ0FDekZKLEtBRHlGLENBQXRFLGNBRVhELElBRlY7O0FBSUEsTUFBSUYsZ0JBQUosRUFBc0I7QUFDcEJJLElBQUFBLFVBQVUsQ0FBQ0ksS0FBWDtBQUVEOztBQUNEUixFQUFBQSxnQkFBZ0IsR0FBRyxJQUFuQjtBQUVBLFNBQU9TLEtBQUssQ0FBQ04sS0FBSyxHQUFHRyxlQUFILEdBQXFCRCxrQkFBM0IsRUFBK0M7QUFDekRLLElBQUFBLE1BQU0sRUFBRU4sVUFBVSxDQUFDTTtBQURzQyxHQUEvQyxDQUFMLENBR0pDLElBSEksQ0FHQyxVQUFBQyxHQUFHO0FBQUEsV0FBSUEsR0FBRyxDQUFDQyxJQUFKLEVBQUo7QUFBQSxHQUhKLEVBSUpGLElBSkksQ0FJQyxVQUFBRSxJQUFJLEVBQUk7QUFDWmIsSUFBQUEsZ0JBQWdCLEdBQUcsS0FBbkI7QUFDQSxXQUFPYSxJQUFJLENBQUNDLE9BQVo7QUFDRCxHQVBJLEVBUUpDLEtBUkksQ0FRRSxVQUFBQyxHQUFHLEVBQUk7QUFDWmhCLElBQUFBLGdCQUFnQixHQUFHLEtBQW5CO0FBQ0FpQixJQUFBQSxPQUFPLENBQUNDLEdBQVIsQ0FBWUYsR0FBWjtBQUNELEdBWEksQ0FBUDtBQVlEOztBQUVNLElBQU1HLGVBQWUsR0FBRyxTQUFsQkEsZUFBa0IsQ0FBQ0MsRUFBRDtBQUFBLFNBQzdCWCxLQUFLLENBQUliLFFBQUosZUFBc0J3QixFQUF0QixpQkFBb0N2QixHQUFwQyxDQUFMLENBQ0djLElBREgsQ0FDUSxVQUFBQyxHQUFHO0FBQUEsV0FBSUEsR0FBRyxDQUFDQyxJQUFKLEVBQUo7QUFBQSxHQURYLEVBRUdGLElBRkgsQ0FFUSxVQUFBRSxJQUFJO0FBQUEsV0FBSUEsSUFBSjtBQUFBLEdBRlosQ0FENkI7QUFBQSxDQUF4QiIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEJBU0VfVVJMID0gJ2h0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMnO1xuY29uc3Qga2V5ID0gJ2IzYTcyYjcyMmUxMTc5NWM3MTc5Y2M5Mjg5ODBhOWUyJztcblxuY29uc3QgQWJvcnRDb250cm9sbGVyID0gd2luZG93LkFib3J0Q29udHJvbGxlcjtcblxubGV0IGlzUmVxdWVzdFBlbmRpbmc6IGJvb2xlYW4gPSBmYWxzZTtcblxuZXhwb3J0IGZ1bmN0aW9uIGZldGNoTW92aWVzKHBhZ2U6IG51bWJlciwgcXVlcnk6IHN0cmluZykge1xuICBsZXQgY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgY29uc3QgdXBjb21pbmdNb3ZpZXNwYXRoID0gYCR7QkFTRV9VUkx9L21vdmllL3VwY29taW5nP2FwaV9rZXk9JHtrZXl9JnBhZ2U9JHtwYWdlfWA7XG4gIGNvbnN0IHNlYXJjaE1vdmllUGF0aCA9IGAke0JBU0VfVVJMfS9zZWFyY2gvbW92aWU/YXBpX2tleT0ke2tleX0mcXVlcnk9JHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgcXVlcnksXG4gICl9JnBhZ2U9JHtwYWdlfWA7XG5cbiAgaWYgKGlzUmVxdWVzdFBlbmRpbmcpIHtcbiAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgLy8gY29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcbiAgfVxuICBpc1JlcXVlc3RQZW5kaW5nID0gdHJ1ZTtcblxuICByZXR1cm4gZmV0Y2gocXVlcnkgPyBzZWFyY2hNb3ZpZVBhdGggOiB1cGNvbWluZ01vdmllc3BhdGgsIHtcbiAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsLFxuICB9KVxuICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgIC50aGVuKGpzb24gPT4ge1xuICAgICAgaXNSZXF1ZXN0UGVuZGluZyA9IGZhbHNlO1xuICAgICAgcmV0dXJuIGpzb24ucmVzdWx0cztcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgaXNSZXF1ZXN0UGVuZGluZyA9IGZhbHNlO1xuICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICB9KTtcbn1cblxuZXhwb3J0IGNvbnN0IGdldE1vdmllRGV0YWlscyA9IChpZDogbnVtYmVyKSA9PlxuICBmZXRjaChgJHtCQVNFX1VSTH0vbW92aWUvJHtpZH0/YXBpX2tleT0ke2tleX1gKVxuICAgIC50aGVuKHJlcyA9PiByZXMuanNvbigpKVxuICAgIC50aGVuKGpzb24gPT4ganNvbik7XG4iXX0=