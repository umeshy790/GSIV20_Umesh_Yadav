506c428c6f0d0574d0bad1136df39713
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _interopRequireWildcard = require("@babel/runtime/helpers/interopRequireWildcard");

var types = _interopRequireWildcard(require("../src/types/types"));

var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));

var _reduxThunk = _interopRequireDefault(require("redux-thunk"));

var _fetchMock = _interopRequireDefault(require("fetch-mock"));

var _expect = _interopRequireDefault(require("expect"));

var _action = require("../src/action");

var middlewares = [_reduxThunk.default];
var mockStore = (0, _reduxMockStore.default)(middlewares);
describe('async actions', function () {
  afterEach(function () {
    _fetchMock.default.restore();
  });
  it('creates actions when fetching has been done', function () {
    _fetchMock.default.getOnce('https://api.themoviedb.org/3/movie/upcoming?api_key=b3a72b722e11795c7179cc928980a9e2', {
      headers: {
        'content-type': 'application/json'
      }
    });

    var expectedActions = [{
      type: types.REQUEST_UPCOMING_MOVIES_ACTION
    }, {
      type: types.REQUEST_UPCOMING_MOVIES_SUCCESS_ACTION,
      data: []
    }];
    var store = mockStore({
      todos: []
    });
    return store.dispatch((0, _action.fetchUpcomingMovies)()).then(function () {
      (0, _expect.default)(store.getActions()).toEqual(expectedActions);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jLWFjdGlvbnMtdGVzdC50cyJdLCJuYW1lcyI6WyJtaWRkbGV3YXJlcyIsInRodW5rIiwibW9ja1N0b3JlIiwiZGVzY3JpYmUiLCJhZnRlckVhY2giLCJmZXRjaE1vY2siLCJyZXN0b3JlIiwiaXQiLCJnZXRPbmNlIiwiaGVhZGVycyIsImV4cGVjdGVkQWN0aW9ucyIsInR5cGUiLCJ0eXBlcyIsIlJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX0FDVElPTiIsIlJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX1NVQ0NFU1NfQUNUSU9OIiwiZGF0YSIsInN0b3JlIiwidG9kb3MiLCJkaXNwYXRjaCIsInRoZW4iLCJnZXRBY3Rpb25zIiwidG9FcXVhbCJdLCJtYXBwaW5ncyI6Ijs7OztBQUFBOztBQUdBOztBQUNBOztBQUVBOztBQUNBOztBQUNBOztBQUVBLElBQU1BLFdBQVcsR0FBRyxDQUFDQyxtQkFBRCxDQUFwQjtBQUNBLElBQU1DLFNBQVMsR0FBRyw2QkFBbUJGLFdBQW5CLENBQWxCO0FBRUFHLFFBQVEsQ0FBQyxlQUFELEVBQWtCLFlBQU07QUFDOUJDLEVBQUFBLFNBQVMsQ0FBQyxZQUFNO0FBQ2RDLHVCQUFVQyxPQUFWO0FBQ0QsR0FGUSxDQUFUO0FBSUFDLEVBQUFBLEVBQUUsQ0FBQyw2Q0FBRCxFQUFnRCxZQUFNO0FBQ3RERix1QkFBVUcsT0FBVixDQUNFLHNGQURGLEVBRUU7QUFDRUMsTUFBQUEsT0FBTyxFQUFFO0FBQUMsd0JBQWdCO0FBQWpCO0FBRFgsS0FGRjs7QUFPQSxRQUFNQyxlQUFlLEdBQUcsQ0FDdEI7QUFBQ0MsTUFBQUEsSUFBSSxFQUFFQyxLQUFLLENBQUNDO0FBQWIsS0FEc0IsRUFFdEI7QUFDRUYsTUFBQUEsSUFBSSxFQUFFQyxLQUFLLENBQUNFLHNDQURkO0FBRUVDLE1BQUFBLElBQUksRUFBRTtBQUZSLEtBRnNCLENBQXhCO0FBT0EsUUFBTUMsS0FBSyxHQUFHZCxTQUFTLENBQUM7QUFBQ2UsTUFBQUEsS0FBSyxFQUFFO0FBQVIsS0FBRCxDQUF2QjtBQUVBLFdBQU9ELEtBQUssQ0FBQ0UsUUFBTixDQUFlLGtDQUFmLEVBQXNDQyxJQUF0QyxDQUEyQyxZQUFNO0FBRXRELDJCQUFPSCxLQUFLLENBQUNJLFVBQU4sRUFBUCxFQUEyQkMsT0FBM0IsQ0FBbUNYLGVBQW5DO0FBQ0QsS0FITSxDQUFQO0FBSUQsR0FyQkMsQ0FBRjtBQXNCRCxDQTNCTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgdHlwZXMgZnJvbSAnLi4vc3JjL3R5cGVzL3R5cGVzJztcbmltcG9ydCAqIGFzIGFjdGlvbnMgZnJvbSAnLi4vc3JjL2FjdGlvbi9hY3Rpb25zJztcblxuaW1wb3J0IGNvbmZpZ3VyZU1vY2tTdG9yZSBmcm9tICdyZWR1eC1tb2NrLXN0b3JlJztcbmltcG9ydCB0aHVuayBmcm9tICdyZWR1eC10aHVuayc7XG5cbmltcG9ydCBmZXRjaE1vY2sgZnJvbSAnZmV0Y2gtbW9jayc7XG5pbXBvcnQgZXhwZWN0IGZyb20gJ2V4cGVjdCc7IC8vIFlvdSBjYW4gdXNlIGFueSB0ZXN0aW5nIGxpYnJhcnlcbmltcG9ydCB7ZmV0Y2hVcGNvbWluZ01vdmllc30gZnJvbSAnLi4vc3JjL2FjdGlvbic7XG5cbmNvbnN0IG1pZGRsZXdhcmVzID0gW3RodW5rXTtcbmNvbnN0IG1vY2tTdG9yZSA9IGNvbmZpZ3VyZU1vY2tTdG9yZShtaWRkbGV3YXJlcyk7XG5cbmRlc2NyaWJlKCdhc3luYyBhY3Rpb25zJywgKCkgPT4ge1xuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGZldGNoTW9jay5yZXN0b3JlKCk7XG4gIH0pO1xuXG4gIGl0KCdjcmVhdGVzIGFjdGlvbnMgd2hlbiBmZXRjaGluZyBoYXMgYmVlbiBkb25lJywgKCkgPT4ge1xuICAgIGZldGNoTW9jay5nZXRPbmNlKFxuICAgICAgJ2h0dHBzOi8vYXBpLnRoZW1vdmllZGIub3JnLzMvbW92aWUvdXBjb21pbmc/YXBpX2tleT1iM2E3MmI3MjJlMTE3OTVjNzE3OWNjOTI4OTgwYTllMicsXG4gICAgICB7XG4gICAgICAgIGhlYWRlcnM6IHsnY29udGVudC10eXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nfSxcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIGNvbnN0IGV4cGVjdGVkQWN0aW9ucyA9IFtcbiAgICAgIHt0eXBlOiB0eXBlcy5SRVFVRVNUX1VQQ09NSU5HX01PVklFU19BQ1RJT059LFxuICAgICAge1xuICAgICAgICB0eXBlOiB0eXBlcy5SRVFVRVNUX1VQQ09NSU5HX01PVklFU19TVUNDRVNTX0FDVElPTixcbiAgICAgICAgZGF0YTogW10sXG4gICAgICB9LFxuICAgIF07XG4gICAgY29uc3Qgc3RvcmUgPSBtb2NrU3RvcmUoe3RvZG9zOiBbXX0pO1xuXG4gICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKGZldGNoVXBjb21pbmdNb3ZpZXMoKSkudGhlbigoKSA9PiB7XG4gICAgICAvLyByZXR1cm4gb2YgYXN5bmMgYWN0aW9uc1xuICAgICAgZXhwZWN0KHN0b3JlLmdldEFjdGlvbnMoKSkudG9FcXVhbChleHBlY3RlZEFjdGlvbnMpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl19