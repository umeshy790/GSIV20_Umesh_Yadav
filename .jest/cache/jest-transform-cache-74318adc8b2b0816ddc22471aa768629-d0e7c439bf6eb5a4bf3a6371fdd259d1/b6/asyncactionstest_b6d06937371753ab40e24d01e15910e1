bb7391e69d0c5043e37ea4d6b6f40c10
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));

var _reduxThunk = _interopRequireDefault(require("redux-thunk"));

var _fetchMock = _interopRequireDefault(require("fetch-mock"));

var _types = require("../src/types/types");

var _action = require("../src/action");

var middlewares = [_reduxThunk.default];
var mockStore = (0, _reduxMockStore.default)(middlewares);
describe('async actions', function () {
  afterEach(function () {
    _fetchMock.default.restore();
  });
  describe('request upcoming movies thunk test', function () {
    it('requesting movies', function () {
      _fetchMock.default.getOnce('', {
        body: {
          results: []
        }
      });

      var expectedActions = [{
        type: _types.REQUEST_UPCOMING_MOVIES_ACTION
      }, {
        type: _types.REQUEST_UPCOMING_MOVIES_SUCCESS_ACTION,
        data: []
      }];
      var store = mockStore({});
      return store.dispatch((0, _action.fetchUpcomingMovies)()).then(function () {
        return expect(store.getActions()).toEqual(expectedActions);
      });
    });
  });
  describe('request detail of movie thunk test', function () {
    var id = 12121;
    it('request movie detail', function () {
      _fetchMock.default.getOnce('', {
        body: {}
      });

      var expectedActions = [{
        type: _types.REQUEST_MOVIE_DETAILS_ACTION,
        id: id
      }, {
        type: _types.REQUEST_MOVIE_DETAILS_SUCCESS_ACTION,
        data: {}
      }];
      var store = mockStore({});
      return store.dispatch((0, _action.fetchMovieDetails)(id)).then(function () {
        return expect(store.getActions()).toEqual(expectedActions);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFzeW5jLWFjdGlvbnMtdGVzdC50cyJdLCJuYW1lcyI6WyJtaWRkbGV3YXJlcyIsInRodW5rIiwibW9ja1N0b3JlIiwiZGVzY3JpYmUiLCJhZnRlckVhY2giLCJmZXRjaE1vY2siLCJyZXN0b3JlIiwiaXQiLCJnZXRPbmNlIiwiYm9keSIsInJlc3VsdHMiLCJleHBlY3RlZEFjdGlvbnMiLCJ0eXBlIiwiUkVRVUVTVF9VUENPTUlOR19NT1ZJRVNfQUNUSU9OIiwiUkVRVUVTVF9VUENPTUlOR19NT1ZJRVNfU1VDQ0VTU19BQ1RJT04iLCJkYXRhIiwic3RvcmUiLCJkaXNwYXRjaCIsInRoZW4iLCJleHBlY3QiLCJnZXRBY3Rpb25zIiwidG9FcXVhbCIsImlkIiwiUkVRVUVTVF9NT1ZJRV9ERVRBSUxTX0FDVElPTiIsIlJFUVVFU1RfTU9WSUVfREVUQUlMU19TVUNDRVNTX0FDVElPTiJdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFNQTs7QUFFQSxJQUFNQSxXQUFXLEdBQUcsQ0FBQ0MsbUJBQUQsQ0FBcEI7QUFDQSxJQUFNQyxTQUFTLEdBQUcsNkJBQW1CRixXQUFuQixDQUFsQjtBQUVBRyxRQUFRLENBQUMsZUFBRCxFQUFrQixZQUFNO0FBQzlCQyxFQUFBQSxTQUFTLENBQUMsWUFBTTtBQUNkQyx1QkFBVUMsT0FBVjtBQUNELEdBRlEsQ0FBVDtBQUlBSCxFQUFBQSxRQUFRLENBQUMsb0NBQUQsRUFBdUMsWUFBTTtBQUNuREksSUFBQUEsRUFBRSxDQUFDLG1CQUFELEVBQXNCLFlBQU07QUFDNUJGLHlCQUFVRyxPQUFWLENBQWtCLEVBQWxCLEVBQXNCO0FBQ3BCQyxRQUFBQSxJQUFJLEVBQUU7QUFBQ0MsVUFBQUEsT0FBTyxFQUFFO0FBQVY7QUFEYyxPQUF0Qjs7QUFJQSxVQUFNQyxlQUFlLEdBQUcsQ0FDdEI7QUFBQ0MsUUFBQUEsSUFBSSxFQUFFQztBQUFQLE9BRHNCLEVBRXRCO0FBQUNELFFBQUFBLElBQUksRUFBRUUsNkNBQVA7QUFBK0NDLFFBQUFBLElBQUksRUFBRTtBQUFyRCxPQUZzQixDQUF4QjtBQUtBLFVBQU1DLEtBQUssR0FBR2QsU0FBUyxDQUFDLEVBQUQsQ0FBdkI7QUFFQSxhQUFPYyxLQUFLLENBQ1RDLFFBREksQ0FDSyxrQ0FETCxFQUVKQyxJQUZJLENBRUM7QUFBQSxlQUFNQyxNQUFNLENBQUNILEtBQUssQ0FBQ0ksVUFBTixFQUFELENBQU4sQ0FBMkJDLE9BQTNCLENBQW1DVixlQUFuQyxDQUFOO0FBQUEsT0FGRCxDQUFQO0FBR0QsS0FmQyxDQUFGO0FBZ0JELEdBakJPLENBQVI7QUFtQkFSLEVBQUFBLFFBQVEsQ0FBQyxvQ0FBRCxFQUF1QyxZQUFNO0FBQ25ELFFBQU1tQixFQUFVLEdBQUcsS0FBbkI7QUFDQWYsSUFBQUEsRUFBRSxDQUFDLHNCQUFELEVBQXlCLFlBQU07QUFDL0JGLHlCQUFVRyxPQUFWLENBQWtCLEVBQWxCLEVBQXNCO0FBQ3BCQyxRQUFBQSxJQUFJLEVBQUU7QUFEYyxPQUF0Qjs7QUFJQSxVQUFNRSxlQUFlLEdBQUcsQ0FDdEI7QUFBQ0MsUUFBQUEsSUFBSSxFQUFFVyxtQ0FBUDtBQUFxQ0QsUUFBQUEsRUFBRSxFQUFFQTtBQUF6QyxPQURzQixFQUV0QjtBQUFDVixRQUFBQSxJQUFJLEVBQUVZLDJDQUFQO0FBQTZDVCxRQUFBQSxJQUFJLEVBQUU7QUFBbkQsT0FGc0IsQ0FBeEI7QUFLQSxVQUFNQyxLQUFLLEdBQUdkLFNBQVMsQ0FBQyxFQUFELENBQXZCO0FBRUEsYUFBT2MsS0FBSyxDQUNUQyxRQURJLENBQ0ssK0JBQWtCSyxFQUFsQixDQURMLEVBRUpKLElBRkksQ0FFQztBQUFBLGVBQU1DLE1BQU0sQ0FBQ0gsS0FBSyxDQUFDSSxVQUFOLEVBQUQsQ0FBTixDQUEyQkMsT0FBM0IsQ0FBbUNWLGVBQW5DLENBQU47QUFBQSxPQUZELENBQVA7QUFHRCxLQWZDLENBQUY7QUFnQkQsR0FsQk8sQ0FBUjtBQW1CRCxDQTNDTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZ3VyZU1vY2tTdG9yZSBmcm9tICdyZWR1eC1tb2NrLXN0b3JlJztcbmltcG9ydCB0aHVuayBmcm9tICdyZWR1eC10aHVuayc7XG5pbXBvcnQgZmV0Y2hNb2NrIGZyb20gJ2ZldGNoLW1vY2snO1xuaW1wb3J0IHtcbiAgUkVRVUVTVF9VUENPTUlOR19NT1ZJRVNfQUNUSU9OLFxuICBSRVFVRVNUX1VQQ09NSU5HX01PVklFU19TVUNDRVNTX0FDVElPTixcbiAgUkVRVUVTVF9NT1ZJRV9ERVRBSUxTX0FDVElPTixcbiAgUkVRVUVTVF9NT1ZJRV9ERVRBSUxTX1NVQ0NFU1NfQUNUSU9OLFxufSBmcm9tICcuLi9zcmMvdHlwZXMvdHlwZXMnO1xuaW1wb3J0IHtmZXRjaFVwY29taW5nTW92aWVzLCBmZXRjaE1vdmllRGV0YWlsc30gZnJvbSAnLi4vc3JjL2FjdGlvbic7XG5cbmNvbnN0IG1pZGRsZXdhcmVzID0gW3RodW5rXTtcbmNvbnN0IG1vY2tTdG9yZSA9IGNvbmZpZ3VyZU1vY2tTdG9yZShtaWRkbGV3YXJlcyk7XG5cbmRlc2NyaWJlKCdhc3luYyBhY3Rpb25zJywgKCkgPT4ge1xuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGZldGNoTW9jay5yZXN0b3JlKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdyZXF1ZXN0IHVwY29taW5nIG1vdmllcyB0aHVuayB0ZXN0JywgKCkgPT4ge1xuICAgIGl0KCdyZXF1ZXN0aW5nIG1vdmllcycsICgpID0+IHtcbiAgICAgIGZldGNoTW9jay5nZXRPbmNlKCcnLCB7XG4gICAgICAgIGJvZHk6IHtyZXN1bHRzOiBbXX0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRBY3Rpb25zID0gW1xuICAgICAgICB7dHlwZTogUkVRVUVTVF9VUENPTUlOR19NT1ZJRVNfQUNUSU9OfSxcbiAgICAgICAge3R5cGU6IFJFUVVFU1RfVVBDT01JTkdfTU9WSUVTX1NVQ0NFU1NfQUNUSU9OLCBkYXRhOiBbXX0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBzdG9yZSA9IG1vY2tTdG9yZSh7fSk7XG5cbiAgICAgIHJldHVybiBzdG9yZVxuICAgICAgICAuZGlzcGF0Y2goZmV0Y2hVcGNvbWluZ01vdmllcygpKVxuICAgICAgICAudGhlbigoKSA9PiBleHBlY3Qoc3RvcmUuZ2V0QWN0aW9ucygpKS50b0VxdWFsKGV4cGVjdGVkQWN0aW9ucykpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgncmVxdWVzdCBkZXRhaWwgb2YgbW92aWUgdGh1bmsgdGVzdCcsICgpID0+IHtcbiAgICBjb25zdCBpZDogbnVtYmVyID0gMTIxMjE7XG4gICAgaXQoJ3JlcXVlc3QgbW92aWUgZGV0YWlsJywgKCkgPT4ge1xuICAgICAgZmV0Y2hNb2NrLmdldE9uY2UoJycsIHtcbiAgICAgICAgYm9keToge30sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgZXhwZWN0ZWRBY3Rpb25zID0gW1xuICAgICAgICB7dHlwZTogUkVRVUVTVF9NT1ZJRV9ERVRBSUxTX0FDVElPTiwgaWQ6IGlkfSxcbiAgICAgICAge3R5cGU6IFJFUVVFU1RfTU9WSUVfREVUQUlMU19TVUNDRVNTX0FDVElPTiwgZGF0YToge319LFxuICAgICAgXTtcblxuICAgICAgY29uc3Qgc3RvcmUgPSBtb2NrU3RvcmUoe30pO1xuXG4gICAgICByZXR1cm4gc3RvcmVcbiAgICAgICAgLmRpc3BhdGNoKGZldGNoTW92aWVEZXRhaWxzKGlkKSlcbiAgICAgICAgLnRoZW4oKCkgPT4gZXhwZWN0KHN0b3JlLmdldEFjdGlvbnMoKSkudG9FcXVhbChleHBlY3RlZEFjdGlvbnMpKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdfQ==